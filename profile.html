<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KollabX - Profile</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/profile.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <nav class="navbar">
        <h1>Kollabx</h1>
        <ul class="nav-links">
            <li><a href="index.html" class="nav-item">Home</a></li>
            <li><a href="explore.html" class="nav-item">Explore</a></li>
            <li><a href="post.html" class="nav-item">Post</a></li>
            <li><a href="dashboard.html" class="nav-item">Dashboard</a></li>
            <li><a href="profile.html" class="nav-item active">Profile</a></li>
            <div class="nav-indicator"></div>
        </ul>
        <div class="nav-right">
            <div class="notification-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
            </div>
            <a href="signin.html" class="btn-signin">Sign In</a>
        </div>
    </nav>

    <main class="profile-section">
        <div class="profile-container">
            <div class="profile-header">
                <div class="avatar-wrapper">
                    <div class="avatar-circle" id="avatar-preview">
                        <svg viewBox="0 0 24 24" id="default-avatar-svg">
                            <path
                                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <img id="avatar-image-preview" src=""
                            style="display: none; width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <label for="avatar-upload" class="avatar-edit-btn">
                        <i data-lucide="edit-2"></i>
                    </label>
                    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                </div>
                <h1 class="profile-title">Your Profile</h1>
                <p>Keep your profile updated to get better project matches</p>
            </div>

            <form class="profile-card">
                <!-- Basic Information -->
                <div class="form-section">
                    <h3>Basic Information</h3>
                    <div class="form-group-row">
                        <div class="form-group">
                            <label for="full-name">Full Name</label>
                            <input type="text" id="full-name" class="form-control" placeholder="Deepanshu Sharma"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="college">College</label>
                            <input type="text" id="college" class="form-control" placeholder="IIT Patna / NIT Rourkela"
                                required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bio">Short Bio</label>
                        <textarea id="bio" class="form-control"
                            placeholder="Robotics enthusiast | Love building AI projects..." required></textarea>
                    </div>
                </div>

                <!-- Skills -->
                <div class="form-section">
                    <h3>Skills (for matching)</h3>
                    <div class="form-group">
                        <input type="text" id="skills" class="form-control"
                            placeholder="React, Python, Arduino, ML (comma separated)" required>
                    </div>
                </div>

                <!-- Interests -->
                <div class="form-section">
                    <h3>Interests</h3>
                    <div class="form-group">
                        <input type="text" id="interests" class="form-control"
                            placeholder="Hackathons, Startups, Robotics, Research" required>
                    </div>
                </div>

                <!-- Links -->
                <div class="form-section">
                    <h3>Links</h3>
                    <div class="form-group-row">
                        <div class="form-group">
                            <label for="github">GitHub</label>
                            <input type="text" id="github" class="form-control"
                                placeholder="https://github.com/username" required>
                        </div>
                        <div class="form-group">
                            <label for="linkedin">LinkedIn</label>
                            <input type="text" id="linkedin" class="form-control"
                                placeholder="https://linkedin.com/in/username" required>
                        </div>
                    </div>
                </div>

                <!-- Availability -->
                <div class="form-section">
                    <h3>Availability</h3>
                    <div class="form-group">
                        <select id="availability" class="form-control" required>
                            <option value="" disabled selected>Select availability</option>
                            <option value="immediate">Weekends only</option>
                            <option value="part-time">2-3 hrs/day</option>
                            <option value="flexible">Daily active</option>
                            <option value="flexible">Full-time project</option>
                        </select>
                    </div>
                </div>

                <div style="margin-top: 3rem; display: flex; justify-content: flex-end;">
                    <button type="submit" id="save-profile" class="btn-signin"
                        style="padding: 1rem 3rem; font-size: 1rem; cursor: pointer;">Save Profile</button>
                </div>
            </form>
        </div>
    </main>

    <footer style="margin-top: 50px;">
        <p>&copy; 2024 Kollabx. All rights reserved.</p>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        let profileImageData = '';

        // Handle Avatar Upload
        const avatarUpload = document.getElementById('avatar-upload');
        const avatarPreview = document.getElementById('avatar-image-preview');
        const defaultAvatarSvg = document.getElementById('default-avatar-svg');

        // Load existing image if any
        window.addEventListener('DOMContentLoaded', () => {
            const savedData = JSON.parse(localStorage.getItem('userProfile'));
            if (savedData) {
                // Populate fields
                if (savedData.fullName) document.getElementById('full-name').value = savedData.fullName;
                if (savedData.college) document.getElementById('college').value = savedData.college;
                if (savedData.bio) document.getElementById('bio').value = savedData.bio;
                if (savedData.skills) document.getElementById('skills').value = savedData.skills;
                if (savedData.interests) document.getElementById('interests').value = savedData.interests;
                if (savedData.github) document.getElementById('github').value = savedData.github;
                if (savedData.linkedin) document.getElementById('linkedin').value = savedData.linkedin;
                if (savedData.availability) document.getElementById('availability').value = savedData.availability;

                if (savedData.profileImage) {
                    profileImageData = savedData.profileImage;
                    avatarPreview.src = profileImageData;
                    avatarPreview.style.display = 'block';
                    defaultAvatarSvg.style.display = 'none';
                }
            }
        });

        avatarUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    profileImageData = event.target.result;
                    avatarPreview.src = profileImageData;
                    avatarPreview.style.display = 'block';
                    defaultAvatarSvg.style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        document.querySelector('.profile-card').addEventListener('submit', (e) => {
            e.preventDefault();

            const profileData = {
                fullName: document.getElementById('full-name').value,
                college: document.getElementById('college').value,
                bio: document.getElementById('bio').value,
                skills: document.getElementById('skills').value,
                interests: document.getElementById('interests').value,
                github: document.getElementById('github').value,
                linkedin: document.getElementById('linkedin').value,
                availability: document.getElementById('availability').value,
                profileImage: profileImageData
            };

            localStorage.setItem('userProfile', JSON.stringify(profileData));
            window.location.href = 'portfolio.html';
        });
    </script>
</body>

</html>